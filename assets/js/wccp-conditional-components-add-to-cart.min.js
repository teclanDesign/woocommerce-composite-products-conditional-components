!function(a,b,c,d){function e(a){return"undefined"==typeof a?!1:!0}var f={};a(".composite_data").on("wc-composite-initializing",function(){var b=a(this).data("container_id");return"undefined"!=typeof f[b]?!0:"undefined"==typeof wc_cp_composite_scripts[b]?!1:(f[b]={composite:wc_cp_composite_scripts[b],script:this,init:function(){this.bind_event_handlers(),this.init_hide_status()},bind_event_handlers:function(){var b=this;"paged"===this.composite.composite_layout&&this.composite.$composite_form.children(".component, .multistep").on("wc-composite-fire-scenario-actions",function(){var c=a(this).data("item_id");b.set_hide_status(c)}).on("wc-composite-set-active-component",function(){a(this).data("item_id");b.reset_hide_status()}).on("wc-composite-ui-updated",function(){var c=a(this).data("item_id");b.update_ui(c)})},reset_hide_status:function(){var b=this.composite;b.$composite_form.find(".component.o-next").removeClass("o-next"),b.$composite_form.find(".component.o-prev").removeClass("o-prev"),a.each(b.composite_components,function(a,b){b.set_hidden(!1)})},init_hide_status:function(){var b=this.composite;a.each(b.composite_components,function(a,c){c._is_hidden=!1,c.is_hidden=function(){return c._is_hidden},c.set_hidden=function(d){var f=parseInt(c.component_index);if(c._is_hidden=d,d){var g=c.$component_options.find("select.component_options_select");if(c.set_optional(!0),""!==g.val()&&g.val("").change(),c.get_step().is_next()&&(0===b.$composite_form.find(".component.o-next").length&&c.$self.addClass("o-next"),c.$self.removeClass("next"),e(b.composite_steps[f+1])&&(b.composite_steps[f+1].get_element().addClass("next"),"yes"===wc_composite_params.script_debug&&console.log("Changed next component to "+b.composite_steps[f+1].get_title()))),c.get_step().is_previous()){0===b.$composite_form.find(".component.o-prev").length&&c.$self.addClass("o-prev"),c.$self.removeClass("prev");for(var h=!1,i=a-1;!h&&i>=0;)b.composite_components[i].is_hidden()||(b.composite_components[i].$self.addClass("prev"),h=!0,"yes"===wc_composite_params.script_debug&&console.log("Changed previous component to "+b.composite_components[i].get_title())),i--}}else c.$self.hasClass("o-next")&&(b.$composite_form.find(".component.next").removeClass("next"),c.$self.removeClass("o-next").addClass("next")),c.$self.hasClass("o-prev")&&(b.$composite_form.find(".component.prev").removeClass("prev"),c.$self.removeClass("o-prev").addClass("prev"))}})},set_hide_status:function(b){var c=this.composite,d=(c.get_step(b),c.get_active_scenarios_by_type("conditional_components").incl_current);"yes"===wc_composite_params.script_debug&&console.log("\nUpdating hidden components..."),"yes"===wc_composite_params.script_debug&&console.log('\nActive "Hide Components" Scenarios: '+d.toString());var e=c.get_scenario_data().scenario_settings.conditional_components,f=[];a.each(c.composite_components,function(a,b){b.set_hidden(!1)}),d.length>0&&a.each(e,function(b,e){a.inArray(b.toString(),d)>-1&&a.each(c.composite_components,function(b,c){a.inArray(c.component_id.toString(),e)>-1&&(c.set_hidden(!0),f.push(c.component_id))})}),"yes"===wc_composite_params.script_debug&&console.log("\nHidden components: "+f.toString())},update_ui:function(b){var c=this.composite,d=0,e=(c.get_step(b),c.$composite_summary.data("columns")),f="",g=1;a.each(c.composite_steps,function(a,b){b.is_component()&&b.get_component().is_hidden()?(c.$composite_pagination.find(".pagination_element_"+b.step_id).hide(),c.$composite_summary.find(".summary_element_"+b.step_id).hide(),d++):(c.$composite_pagination.find(".pagination_element_"+b.step_id+" .element_index").html(a-d+1),c.$composite_pagination.find(".pagination_element_"+b.step_id).show(),c.$composite_summary.find(".summary_element_"+b.step_id+" .step_index").html(a-d+1),c.$composite_summary.find(".summary_element_"+b.step_id).show()),f="",g=a-d+1,((g-1)%e==0||1==e)&&(f="first"),g%e==0&&(f="last"),c.$composite_summary.find(".summary_element_"+b.step_id).removeClass("first last").addClass(f)})}},void f[b].init())})}(jQuery,window,document);