!function(a,b,c,d){function e(a){return"undefined"==typeof a?!1:!0}function f(a){b.console&&b.console.log(a)}var g={};a(".composite_data").on("wc-composite-initializing",function(){var b=a(this).data("container_id");return"undefined"!=typeof g[b]?!0:"undefined"==typeof wc_cp_composite_scripts[b]?!1:(g[b]={composite:wc_cp_composite_scripts[b],script:this,init:function(){this.bind_event_handlers(),this.init_hide_status()},bind_event_handlers:function(){var a=this;"paged"===this.composite.composite_layout&&this.composite.$composite_form.children(".component, .multistep").on("wc-composite-fire-scenario-actions",function(){a.set_hide_status()}).on("wc-composite-set-active-component",function(){a.reset_hide_status()}).on("wc-composite-ui-updated",function(){a.update_ui()})},reset_hide_status:function(){var b=this.composite;b.$composite_form.find(".component.o-next").removeClass("o-next"),b.$composite_form.find(".component.o-prev").removeClass("o-prev"),a.each(b.composite_components,function(a,b){b.set_hidden(!1)})},init_hide_status:function(){var b=this.composite;a.each(b.composite_components,function(a,c){c._is_hidden=!1,c.is_hidden=function(){return c._is_hidden},c.set_hidden=function(d){var g=parseInt(c.component_index);if(c._is_hidden=d,d){var h=c.$component_options.find("select.component_options_select");if(""!==h.val()&&(c.$self.addClass("resetting"),h.val("").change(),c.$self.removeClass("resetting")),c.set_optional(!0),c.get_step().is_next()&&(0===b.$composite_form.find(".component.o-next").length&&c.$self.addClass("o-next"),c.$self.removeClass("next"),e(b.composite_steps[g+1])&&(b.composite_steps[g+1].get_element().addClass("next"),"yes"===wc_composite_params.script_debug&&f("Changed next component to "+b.composite_steps[g+1].get_title()))),c.get_step().is_previous()){0===b.$composite_form.find(".component.o-prev").length&&c.$self.addClass("o-prev"),c.$self.removeClass("prev");for(var i=!1,j=a-1;!i&&j>=0;)b.composite_components[j].is_hidden()||(b.composite_components[j].$self.addClass("prev"),i=!0,"yes"===wc_composite_params.script_debug&&f("Changed previous component to "+b.composite_components[j].get_title())),j--}}else c.$self.hasClass("o-next")&&(b.$composite_form.find(".component.next").removeClass("next"),c.$self.removeClass("o-next").addClass("next")),c.$self.hasClass("o-prev")&&(b.$composite_form.find(".component.prev").removeClass("prev"),c.$self.removeClass("o-prev").addClass("prev"))}})},set_hide_status:function(){var b=this.composite,c=b.composite_steps[b.composite_steps.length-1].step_id,d=b.update_active_scenarios(c,!0),e=b.get_scenarios_by_type(d.incl_current,"conditional_components");"yes"===wc_composite_params.script_debug&&f("\nUpdating hidden components..."),"yes"===wc_composite_params.script_debug&&f('\nActive "Hide Components" Scenarios: '+e.toString());var g=b.get_scenario_data().scenario_settings.conditional_components,h=[];a.each(b.composite_components,function(a,b){b.set_hidden(!1)}),e.length>0&&a.each(g,function(c,d){a.inArray(c.toString(),e)>-1&&a.each(b.composite_components,function(b,c){a.inArray(c.component_id.toString(),d)>-1&&(c.set_hidden(!0),h.push(c.component_id))})}),"yes"===wc_composite_params.script_debug&&f("\nHidden components: "+h.toString())},update_ui:function(){var b=this.composite,c=0,d=b.$composite_summary.data("columns"),e="",f=1;a.each(b.composite_steps,function(a,g){g.is_component()&&g.get_component().is_hidden()?(b.$composite_pagination.find(".pagination_element_"+g.step_id).hide(),b.$composite_summary.find(".summary_element_"+g.step_id).hide(),c++):(b.$composite_pagination.find(".pagination_element_"+g.step_id+" .element_index").html(a-c+1),b.$composite_pagination.find(".pagination_element_"+g.step_id).show(),b.$composite_summary.find(".summary_element_"+g.step_id+" .step_index").html(a-c+1),b.$composite_summary.find(".summary_element_"+g.step_id).show()),e="",f=a-c+1,((f-1)%d===0||1===d)&&(e="first"),f%d===0&&(e="last"),b.$composite_summary.find(".summary_element_"+g.step_id).removeClass("first last").addClass(e)}),b.update_summary()}},void g[b].init())})}(jQuery,window,document);