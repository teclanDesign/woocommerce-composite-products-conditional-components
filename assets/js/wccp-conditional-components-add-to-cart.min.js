!function(a){function b(a){return"undefined"==typeof a?!1:!0}var c={};a(".composite_data").on("wc-composite-initializing",function(){var d=a(this).data("container_id");return"undefined"!=typeof c[d]?!0:"undefined"==typeof wc_cp_composite_scripts[d]?!1:(c[d]={composite:wc_cp_composite_scripts[d],script:this,init:function(){this.bind_event_handlers(),this.init_hide_status()},bind_event_handlers:function(){var b=this;"paged"===this.composite.composite_layout&&this.composite.$composite_form.children(".component, .multistep").on("wc-composite-fire-scenario-actions",function(){var c=a(this).data("item_id");b.set_hide_status(c)}).on("wc-composite-set-active-component",function(){a(this).data("item_id");b.reset_hide_status()}).on("wc-composite-ui-updated",function(){var c=a(this).data("item_id");b.update_ui(c)})},reset_hide_status:function(){var b=this.composite;b.$composite_form.find(".component.o-next").removeClass("o-next"),b.$composite_form.find(".component.o-prev").removeClass("o-prev"),a.each(b.composite_components,function(a,b){b.set_hidden(!1)})},init_hide_status:function(){var c=this.composite;a.each(c.composite_components,function(a,d){d._is_hidden=!1,d.is_hidden=function(){return d._is_hidden},d.set_hidden=function(e){var f=parseInt(d.component_index);if(d._is_hidden=e,e){var g=d.$component_options.find("select.component_options_select");if(d.set_optional(!0),""!==g.val()&&g.val("").change(),d.get_step().is_next()&&(0===c.$composite_form.find(".component.o-next").length&&d.$self.addClass("o-next"),d.$self.removeClass("next"),b(c.composite_steps[f+1])&&(c.composite_steps[f+1].get_markup().addClass("next"),console.log("Changed next component to "+c.composite_steps[f+1].get_title()))),d.get_step().is_previous()){0===c.$composite_form.find(".component.o-prev").length&&d.$self.addClass("o-prev"),d.$self.removeClass("prev");for(var h=!1,i=a-1;!h&&i>=0;)c.composite_components[i].is_hidden()||(c.composite_components[i].$self.addClass("prev"),h=!0,"yes"===wc_composite_params.script_debug&&console.log("Changed previous component to "+c.composite_components[i].get_title())),i--}}else d.$self.hasClass("o-next")&&(c.$composite_form.find(".component.next").removeClass("next"),d.$self.removeClass("o-next").addClass("next")),d.$self.hasClass("o-prev")&&(c.$composite_form.find(".component.prev").removeClass("prev"),d.$self.removeClass("o-prev").addClass("prev"))}})},set_hide_status:function(b){var c=this.composite,d=(c.get_step(b),c.get_active_scenarios_by_type("conditional_components").incl_current);"yes"===wc_composite_params.script_debug&&console.log("\nUpdating hidden components..."),"yes"===wc_composite_params.script_debug&&console.log('\nActive "Hide Components" Scenarios: '+d.toString());var e=c.get_scenario_data().scenario_settings.conditional_components,f=[];a.each(c.composite_components,function(a,b){b.set_hidden(!1)}),d.length>0&&a.each(e,function(b,e){a.inArray(b.toString(),d)>-1&&a.each(c.composite_components,function(b,c){a.inArray(c.component_id.toString(),e)>-1&&(c.set_hidden(!0),f.push(c.component_id))})}),"yes"===wc_composite_params.script_debug&&console.log("\nHidden components: "+f.toString())},update_ui:function(b){var c=this.composite,d=0,e=(c.get_step(b),c.$composite_summary.data("columns")),f="",g=1;a.each(c.composite_steps,function(a,b){b.is_component()&&b.get_component().is_hidden()?(c.$composite_pagination.find(".pagination_element_"+b.step_id).hide(),c.$composite_summary.find(".summary_element_"+b.step_id).hide(),d++):(c.$composite_pagination.find(".pagination_element_"+b.step_id+" .element_index").html(a-d+1),c.$composite_pagination.find(".pagination_element_"+b.step_id).show(),c.$composite_summary.find(".summary_element_"+b.step_id+" .step_index").html(a-d+1),c.$composite_summary.find(".summary_element_"+b.step_id).show()),f="",g=a-d+1,((g-1)%e==0||1==e)&&(f="first"),g%e==0&&(f="last"),c.$composite_summary.find(".summary_element_"+b.step_id).removeClass("first last").addClass(f)})}},void c[d].init())})}(jQuery,window,document);